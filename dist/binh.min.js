function Binh(n,t){var i=Binh,r="DOMContentLoaded";i.state=new i.State,document.addEventListener(r,function e(){document.removeEventListener(r,e),(t=t||{}).element=t.element||document.body,i.router=new i.Router(n,t)})}!function(){function t(e,n){if(!n)return e?i[e]:i;(e=i[e]=i[e]||[]).length<t.limit&&e.push(n)}Binh.iid=function(){return this.iid++}.bind({iid:0});var i={};t.limit=10,Binh.error=t}(),function(){var u,t=Binh,r=t.Component={},o={},s={},c={},a={},f={};function l(e,n){var t=n instanceof Function?n:function(){},i=document.createElement("script");i.src=e,document.head.appendChild(i),i.remove(),i.onload=function(){var e=u;u=null,e instanceof d?e.loaded=i.onload:t(e)},i.onerror=function(){t()}}function h(e,n){function t(){e&&e.forEach(function(e){e()})}n?setTimeout(t):t()}function d(){}r.create=function(e,n){return c[e](n)},r.define=function(i,e){c[i]=e,t[i]=function(e,n){var t=i;return e&&"string"==typeof e?o.hasOwnProperty(e)?o[e]:n instanceof Function?o[e]=r.create(t,n):o[e]=s[t](e,o):e instanceof Function?u=r.create(t,e):r.create(t,n)}},r.fake=function(e,n){s[e]=n},t.require=l,t.script=function(e,n){t.prequire([e],n),u=null},t.prequire=function(e,n){var i,r,o=e.length,s=n instanceof Function?n:function(){};o?(i=u=new d,r=[],e.forEach(function(e){var n=f[e];function t(){a[e]=!0,--o||(s(),i.loaded&&i.loaded()),h(n),delete f[e]}a[e]?r.push(t):n?n.push(t):(n=f[e]=[],l(e,t))}),r.length&&h(r,!0)):s()}}(),function(){var e=Binh.Component;function n(e){var n,t={init:e},i=function(){var e=this;if(e.cache)return e.cache;e.initer.invoked=!0;var n=e.init,t=e.processes;n&&(n.call(t,{define:function(){var e=arguments.length;if(1===e&&arguments[0]instanceof Object){var n,t=arguments[0];for(n in t)this.processes[n]=t[n]}else 1<e&&(this.processes[arguments[0]]=arguments[1])}.bind(e),state:Binh.state,http:Binh.http,sid:e.sid,service:t}),e.cache=t);return t}.bind(t);for(n in o)i[n]=o[n];return i.sid=t.sid=function(e){this.invoked||this();return e=JSON.stringify(e),this.sids[e]||(this.sids[e]=r(e))}.bind(i),i.queue=[],i.sids={},t.initer=i,t.processes={},i.cache=function(e){t.cache=e},i}e.define("service",n),e.fake("service",function(o,s){var e=n(),u=(e.fake=!0,{faker:e,url:o,components:s});return Binh.require(o,function(e){if(null==e)throw new Error("Undefined Service: "+o);s[o]=e,n=(e=u).faker,e=e.components[e.url],delete n.fake,e.sids=n.sids,n.cache(e());var n,t=n,i=t.queue;if(!t.fake)for(;i.length;){var r=i.shift();t[r.type](r.name).apply(null,r.args)}}),e});var r=window.Symbol||function(e){var n=""+Date.now()+Binh.iid();try{return e+n}catch(e){return n}},o={};function a(e,n,t){var i,r,o,s=e();return e.fake?s[t]||(s[t]=(i=e,r=n,o=t,function(){if(!i.fake)return i[r](o).apply(null,arguments);i.queue.push({type:r,name:o,args:arguments})})):s[t]}o.instant=function(e){return a(this,"instant",e)},o.once=function(e){var n=this,t=!1,i=a(n,"once",e);return function(){if(!t)return t=!0,i instanceof Function?i.apply(n,arguments):void 0}},o.debounce=function(e,n,t,i){var r,o,s,u=this,c=a(u,"debounce",e);return function(){c instanceof Function&&(o=arguments,t&&!r&&c.apply(u,o),clearTimeout(r),r=setTimeout(function(){t&&(i||s)||c.apply(u,o),s=r=null},n),s=null==s)}},o.throttle=function(e,n){var t=this,i=!1,r=a(t,"throttle",e);return function(){i||(i=!0,r instanceof Function&&r.apply(t,arguments),setTimeout(function(){i=!1},n))}}}(),function(){var e=Binh.Component;function t(e){var n,t,i=this,r=i.id="binh"+Binh.iid(),e=(i.rules=[],e(function(e,n){var t;"string"==typeof e&&(e=e.replace(/\s+/g," "),t="",n instanceof Array&&(t="{"+n.join(";")+"}"),this.rules.push({selector:e,value:t}))}.bind(i))),o=r,s=i.rules,u=s.length;if(u){for(var c=d(o).sheet,a=u-1;0<=a;a--){var f=s[a],l=f.value?f.selector+f.value:f.selector;try{c.insertRule(l)}catch(e){console.log(f.selector,e)}}h(c,o)}n=r,"string"==typeof(u=e)&&((t=d(n+"x")).appendChild(document.createTextNode(u)),t.onload=function(){var e=t.sheet;e&&!e.prefixed&&(h(t.sheet,n),t.onload=null)}),delete i.rules}function h(e,n){!function n(t,i){if(t.prefixed)return;var e;try{e=t.cssRules}catch(e){return(t.timeout=t.timeout||0,200<t.timeout)?Binh.error("css",{error:e,sheet:t}):void setTimeout(function(){t.timeout++,n(t,i)},t.timeout)}var r=e.length,o=i+" ",s=/^binh($|[^\w-])/,u=/^:root($|[^\w-])/,c=/^xbinh($|[^\w-])/;for(var a=0;a<r;a++){var f=e.item(a);if(f instanceof CSSStyleRule){var l=f.selectorText;f.selectorText=l.match(s)?l.replace(s,i+"$1"):l.match(u)?l.replace(u,i+"$1"):l.match(c)?l.replace(c,"$1"):o+l}else if(f instanceof CSSImportRule){var l=f.styleSheet,h=l.refs=t.refs||{};if(h[l.href])continue;n(l,i)}f.cssRules&&n(f,i)}t.prefixed=!0}(e,"."+n)}function d(e){var n=document.createElement("style");return n.id=e,document.head.appendChild(n),n}function i(e,n){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.crossOrigin="",document.head.appendChild(t),n&&(t.id=n,t.onload=function(){t.onload=null,h(t.sheet,n)})}e.define("style",function(e){return new t(e)}),e.fake("style",function(e){var n=new t(function(){});return i(e=e.replace(/\.css\.js$/,".css"),n.id),n}),Binh.link=function(e){i(e)}}(),function(){var e=Binh.Component;function i(e,n){n&&n.style&&n.style.apply(n,e)}e.define("ui",function(e){return n={context:{shared:{}},component:e},(t=function(){var e=this.component.apply(this.context,arguments),n=this.styles;n instanceof Array&&(e instanceof Array?e.forEach(i.bind(null,n)):i(n,e));{var t;e instanceof Array&&(t=new Binh.ElementNode(new DocumentFragment),e.forEach(function(e){t(e)}),e=t)}return e}.bind(n)).style=function(e){return n.styles=e,t},t;var n,t}),e.fake("ui",function(n,t){var i={fakers:[],url:n,components:t},e=function(){var e,n=this.components[this.url];return n.fake?(e=Binh.el("fake")(),this.fakers.push(e),e.fake=!0,e.args=arguments,e):n.apply(null,arguments)}.bind(i);return e.fake=!0,Binh.require(n,function(e){if(null==e)throw new Error("Undefined UI: "+n);var a;t[n]=e,a=i.components[i.url],i.fakers.forEach(function(t){var e,n=t.element,i=a.apply(null,t.args);if(i){if(i.actions||t.actions){var r,o,s=i.actions||{},u=t.actions||{};for(r in u)s[r]=u[r];for(o in s)u[o]=s[o];i.actions=t.actions=u}else i.actions=t.actions={};i.customs&&(t.customs=i.customs),i.styles&&(t.styles=i.styles),i.fake?(e=i.queue||(i.queue=[])).push(function(){e.push(c)}):c(),t(Array.prototype.slice.call(n.childNodes)),t.class(n.className)}function c(){delete t.fake,t.ref(i);for(var e=t,n=e.queue||[];n.length;)n.shift()(e);delete e.queue}})}),e})}(),function(){function i(e){function n(){var s=arguments;return f(n,function(e){for(var n=s.length,t=e.element,i=c,r=0;r<n;r++){var o=s[r];i(o)(t,o)}}),n}for(var t in r)n[t]=r[t];return(e.enode=n).element=e,n.constructor=i,n}Binh.ElementNode=i;var r={};function t(e,n,t,i){return f(e,function(e){Binh.state[n](t,i,e)})}function e(e){for(var n=e.length,t=[],i=0;i<n;i++){var r=e[i];"string"==typeof r&&(r=r.trim())&&t.push.apply(t,r.split(/\s+/))}return t}function n(e,n,t){return f(e,function(e){e=e.element.classList;e&&e[n].apply(e,t)})}function o(n,t,e){return t instanceof Function?t.bind(null,n):function(){e.forEach(function(e){e.toggleClass(t,n)})}}r.set=function(n){return f(this,function(e){(n.enode=e).onref instanceof Function?e.onref(n):e.element=n})},r.ref=function(i){return f(this,function(e){var n=e.onref||i.onref||function e(n){e.enodes.forEach(function(e){e.element=n})},t=n.enodes||(n.enodes=[]);e.onref||t.push(e),i.onref||t.push(i),e.onref=i.onref=n,e.swap(i)})},r.swap=function(r){return f(this,function(e){var n=e.element,t=n.parentNode,i=r.element;t&&t.replaceChild(i,n),e.set(i)})},r.ready=function(e){return f(this,e)},r.on=function(n,t,i){return f(this,function(e){e.element.addEventListener(n,t,i)})},r.off=function(n,t,i){var r=arguments;return f(this,function(e){e=e.element;if(r.length)return e.removeEventListener(n,t,i);e&&e.parentNode&&e.parentNode.removeChild(e)})},r.race=function(e,i,r){var o=(""+e).split(" ");return f(this,function(e){var n=e.element;function t(e){o.forEach(function(e){n.removeEventListener(e,t,r)}),r&&r.once||n.addEventListener(e.type,i,r),i(e)}o.forEach(function(e){n.addEventListener(e,t,r)})})},r.when=function(e,n){var t=l(this,"actions",{});if("string"!=typeof e)for(var i in e)e[i]instanceof Function&&(t[i]=e[i]);else n instanceof Function&&(t[e]=n);return this},r.action=function(n){var t=this;return function(){var e=l(t,"actions",{})[n];if(e)return{value:e.apply(null,arguments)}}},r.subscribe=function(n,t){return f(this,function(e){Binh.state.listen(n,t,e)})},r.listen=function(e,n){return t(this,"listen",e,n)},r.read=function(e,n){return t(this,"read",e,n)},r.request=function(e,n){return t(this,"request",e,n)},r.clone=function(n){var t=new i(document.createElement("clone"));return f(this,function(e){e=new i(e.element.cloneNode(n));t.swap(e)}),t},r.empty=function(){return f(this,function(e){e.element.textContent=""})},r.new=function(){return this.empty().apply(null,arguments)},r.css=function(i){return f(this,function(e){var n,t=e.element.style;for(n in i)0==n.indexOf("--")?t.setProperty(n,i[n]):t[n]=i[n]})},r.style=function(){for(var e=arguments,n=e.length,t=[],i=0;i<n;i++){var r=e[i],r="string"==typeof r?Binh.style(r):r;t.push(r.id)}return f(this,function(e){var n=l(e,"styles",[]),n=(n.push.apply(n,t),e.element.classList);n.add.apply(n,e.styles)})},r.nostyle=function(){return f(this,function(e){var n=e.element.classList;n.remove.apply(n,e.styles),e.styles=[]})},r.custom=function(){var i=e(arguments);return f(this,function(e){var n=e.customs||[],t=e.element.classList;t.remove.apply(t,n),t.add.apply(t,i),e.customs=i})},r.class=function(e,n){return 0==n?this.removeClass(e):this.addClass(e),this},r.addClass=function(){return n(this,"add",e(arguments))},r.removeClass=function(){return n(this,"remove",e(arguments))},r.toggleClass=function(){return n(this,"toggle",arguments)},r.each=function(i,r){return f(this,function(e){for(var n=i&&i.length,t=0;t<n;t++)e(r(i[t]))})},r.as=function(e,n){if(e instanceof Object)return"string"==typeof n?e[n]=this:e.enode=this,this},r.resize=function(r){return f(this,function(e){var n={matched:!1,enode:e},t=function(e,n,t){var i=this;e=i.called?i.matched:!!e,i.called=!0,i.matched===e&&!i.called||(i.matched=e,requestAnimationFrame(o(e,n,t)))}.bind(n);function i(){i.wait||(document.contains(e.element)?(i.wait=1,requestAnimationFrame(function(){i.wait=0,n.called=!1,r(t)})):window.removeEventListener("resize",i))}window.addEventListener("resize",i),setTimeout(i)})},r.screen=function(t,i){return f(this,function(n){o(s<=t,i,[n])(),n.resize(function(e){e(s<=t,i,[n])})})};var s=window.innerWidth,u=(window.addEventListener("resize",function(){s=window.innerWidth}),r.route=function(n){return f(this,function(e){e.router=new Binh.Router(n,{enode:e})})},{object:function(n,e){if(null!=e){if(e instanceof Node)return n.appendChild(e);switch(e.constructor){case Array:e.forEach(function(e){c(e)(n,e)});break;case Binh.Router:case DocumentFragment:case Element:n.appendChild(e.element||e);break;default:for(var t in e)!1===e[t]?n.removeAttribute(t):n.setAttribute(t,e[t])}}},function:function(e,n){switch(n.constructor){case i:e.appendChild(n.element);break;case Function:var t=n(e);c(t)(e,t)}},undefined:function(){}});function c(e){return u[typeof e]||a}function a(e,n){try{e.appendChild(document.createTextNode(n))}catch(e){}}function f(e,n){return n instanceof Function&&(e.fake?(e.queue=e.queue||[]).push(n):n(e)),e}function l(e,n,t){return e[n]||(e[n]=t)}var h={};function d(e){var n=Array.prototype.slice.call(arguments,1),t=document.createElement(e);return t.constructor=Element,new i(t).apply(0,n)}function p(e,n){return h[e]||(n=h[e]=d.bind(0,e))&&(n.constructor=d,n)}Binh.el=p,Binh.element=function(){for(var e=arguments,n=e.length;n--;)p(e[n]);return h},Binh.els=h;var v={};function m(e){var n=Array.prototype.slice.call(arguments,1),t=document.createElementNS("http://www.w3.org/2000/svg",e);return t.constructor=Element,new i(t).apply(0,n)}function y(e,n){return v[e]||(n=v[e]=m.bind(0,e))&&(n.constructor=m,n)}Binh.svg=y,Binh.svgs=function(){for(var e=arguments,n=e.length;n--;)y(e[n]);return v},Binh.SVGs=v}(),function(){function e(e){this.url=e,this.parameters=[]}var n=(Binh.http=e).prototype;e.defer=function(e){var arguments=e instanceof Array?e:arguments||[e],n=arguments.length,t=[],i=function(){};t.count=0,t.results=[],t.ready=function(e){this.count++,this.results[e.index]=e,this.count===this.length&&i instanceof Function&&i.apply(null,this.results)};for(var r=0;r<n;r++){var o=arguments[r];o.defers=o.defers||[],o.defers.push({defer:t,index:r}),t.push(o)}return{done:function(e){i=e instanceof Function?e:function(){}}}},n.get=function(e){return this.request("GET",e)},n.post=function(e){return this.request("POST",e)},n.request=function(e,n){var t,i=this.init(n),r=(i.open(e,this.url+this.parameters.join("/")+(this.queries||"")),this.payload&&i.setRequestHeader("Content-Type","application/json"),this.headers);for(t in r)i.setRequestHeader(t,r[t]);return this.token&&i.setRequestHeader("Authorization","Bearer "+this.token),i.responseType="text",i.send(this.payload),this},n.init=function(e){var t=this,i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE){var n;try{n=JSON.parse(i.responseText)}catch(e){n=i.responseText}e instanceof Function&&e(n,i),t.defers instanceof Array&&t.defers.forEach(function(e){e.defer.ready({response:n,xhttp:i,index:e.index})})}},i},n.auth=function(e){return e&&(this.token=e),this},n.header=function(e){return this.headers=e,this},n.body=function(e){return this.payload=JSON.stringify(e),this},n.parameter=function(e){var n;return e instanceof Array&&(n=this.url[this.url.length-1],this.parameters=("/"===n?[]:[""]).concat(e)),this},n.query=function(e){var n,t="";for(n in e)t+=n+"="+e[n]+"&";return this.queries="?"+t,this}}(),function(){function t(e,n){var r,o,s=this,u=i(e=e||{}),n=n||{},c=Binh.Util.domced,a=(s.enode=n.enode||Binh.ElementNode(n.element||document.createElement("div")),s.element=s.enode.element,s.constructor=t,s.getParameters=function(){return o},s.load=function(e){var n,t,i;c(s)?(e=!(e instanceof Event),i=(t=(n=f(u)).component)&&t!==r,o=n.parameters,(i||e)&&(h=!0,d[typeof(r=t)](t,s))):(window.removeEventListener("popstate",a),window.removeEventListener("load",a))});window.addEventListener("popstate",a),window.addEventListener("load",a),l&&(l(),l=null),s.load()}function i(e){var n,t=[];for(n in e)t.push({route:n,segments:n.split("/"),component:e[n]});return t.sort(function(e,n){return n.segments.length-e.segments.length||n.route.length-e.route.length}),t}function f(e){var n,t=location.pathname.split("/"),i={};for(n in e){var r=e[n],o=r.segments;if(!(t.length<o.length)){for(var s=!0,u=0;u<o.length;u++){var c=o[u],a=t[u];if(c.match(/^:/))i[c.slice(1)]=a;else if(t.indexOf(c)!==u){s=!1;break}}if(s)return{component:r.component,parameters:i}}}return{}}Binh.Router=t;var l,h,n=function(){};function e(){if(!e.init)return e.init=!0;n()}window.addEventListener("popstate",e),window.addEventListener("load",e),t.onroute=function(e){e instanceof Function&&(n=l=e)},t.navigate=function(e,n){var t=location.href.replace(location.origin,"");t===e||(h=!1,history.pushState(n||{},"",e),Binh.Util.emitEvent(window,"load"),h)||history.replaceState(n||{},"",t)},t.match=function(e){var n={};return n[e]=!0,!!f(i(n)).component},t.query=function(n){var t,i=[],r=JSON.stringify;return location.search.substring(1).split("&").forEach(function(e){if(!n)try{e=decodeURIComponent(e)}catch(e){}t=e.split("="),i.push(r(t.shift())+":"+r(t.join("=")))}),JSON.parse("{"+i.join(",")+"}")};var d={string:function(e,n){e=Binh.ui(e);d.function(e,n)},number:function(e,n){n.element.appendChild(document.createTextNode(e))},function:function(e,n){e=e.element||e(n.getParameters());if("string"==typeof e)return this.string(e,n);(e instanceof Node||(e=e.element)instanceof Node)&&(n.element=n.enode.empty()(e).element)},undefined:function(){}}}(),Binh.State=function(){var t={};function a(e){var n=t[e]||{};return t[e]=n}function r(e,n,t){e.set&&n instanceof Function&&n(e.value,t)}this.set=function(e,n){var t=a(e);t.value=n,this.emitLater(e,t)},this.edit=function(e,n){var t=a(e),i=t.value;n instanceof Function?t.value=n(i):i instanceof Object&&n instanceof Object?Object.assign(i,n):t.value=n,this.emitLater(e,t)},this.emitLater=function(e,n){n.set=!0;var t=this;clearTimeout(n.emitId),n.emitId=setTimeout(function(){t.emit(e,n)})},this.emit=function(e,i){for(var r=(i=i||a(e)).listeners||[],o=Binh.Util.domced,n=(r.forEach(function(e,n){var t=e.enode;o(t)?e.handler(i.value,t):r.splice(n,1)}),i),t=n.readers||[],s=Binh.Util.domced;t.length;){var u=t.shift(),c=u.enode;s(c)&&u.handler(n.value,c)}},this.listen=function(e,n,t){var i=a(e);(i.listeners||(i.listeners=[])).push({enode:t,handler:n}),this.update(e,i),r(i,n,t)},this.request=function(e,n,t){var i;n instanceof Function&&((i=a(e)).debounce?n(i.value,t):((i.readers||(i.readers=[])).push({enode:t,handler:n}),this.update(e,i)))},this.read=function(e,n,t){var i=a(e);i.set?r(i,n,t):this.request(e,n,t)},this.serve=function(e,n){var t,i=a(e);n instanceof Function&&(i.fetch=n,n=i.listeners||[],t=i.readers||[],n.length||t.length)&&this.update(e,i)},this.schema=this.serve,this.update=function(n,t){var i;(t=t||a(n)).fetch instanceof Function&&(t.fetching||t.debounce||(t.fetching=!0,i=this,t.fetch(function(e){t.debounce=!0,t.set=!0,i.set(n,e),t.fetching=!1,setTimeout(function(){delete t.debounce},3e3)})))},this.as=function(e){var n=a(e);if(n.as)return n.as;var t,i=n.as={};for(t in this)i[t]=this[t].bind(this,e);return i}},Binh.Util={emitEvent:function(e,n){var t;document.createEvent?("function"==typeof Event?t=new Event(n):(t=document.createEvent("Event")).initEvent(n,!1,!0),e.dispatchEvent(t)):((t=document.createEventObject()).eventName=t.eventType=n,e.fireEvent("on"+t.eventType,t))},domced:function(e){var n=e&&e.element instanceof Node,t=document.contains(e&&e.element),i=e&&e.domed;return t&&!i&&(e.domed=!0),!(n&&i&&!t)}};