function Binh(e,t){var i=Binh,r="DOMContentLoaded";i.state=new i.State,document.addEventListener(r,function n(){document.removeEventListener(r,n),(t=t||{}).element=t.element||document.body,i.router=new i.Router(e,t)})}!function(){function t(n,e){if(!e)return n?i[n]:i;(n=i[n]=i[n]||[]).length<t.limit&&n.push(e)}Binh.iid=function(){return this.iid++}.bind({iid:0});var i={};t.limit=10,Binh.error=t}(),function(){var u,t=Binh,r=t.Component={},o={},s={},c={},a={},f={};function l(n,e){var t=e instanceof Function?e:function(){},i=document.createElement("script");i.src=n,document.head.appendChild(i),i.remove(),i.onload=function(){var n=u;u=null,n instanceof d?n.loaded=i.onload:t(n)},i.onerror=function(){t()}}function h(n,e){function t(){n&&n.forEach(function(n){n()})}e?setTimeout(t):t()}function d(){}r.create=function(n,e){return c[n](e)},r.define=function(i,n){c[i]=n,t[i]=function(n,e){var t=i;return n&&"string"==typeof n?o.hasOwnProperty(n)?o[n]:e instanceof Function?o[n]=r.create(t,e):o[n]=s[t](n,o):n instanceof Function?u=r.create(t,n):r.create(t,e)}},r.fake=function(n,e){s[n]=e},t.require=l,t.script=function(n,e){t.prequire([n],e),u=null},t.prequire=function(n,e){var i,r,o=n.length,s=e instanceof Function?e:function(){};o?(i=u=new d,r=[],n.forEach(function(n){var e=f[n];function t(){a[n]=!0,--o||(s(),i.loaded&&i.loaded()),h(e),delete f[n]}a[n]?r.push(t):e?e.push(t):(e=f[n]=[],l(n,t))}),r.length&&h(r,!0)):s()}}(),function(){var n=Binh.Component;function e(n){var e,t={init:n},i=function(){var n=this;if(n.cache)return n.cache;n.initer.invoked=!0;var e=n.init,t=n.processes;e&&(e.call(t,{define:function(){var n=arguments.length;if(1===n&&arguments[0]instanceof Object){var e,t=arguments[0];for(e in t)this.processes[e]=t[e]}else 1<n&&(this.processes[arguments[0]]=arguments[1])}.bind(n),state:Binh.state,http:Binh.http,sid:n.sid,service:t}),n.cache=t);return t}.bind(t);for(e in o)i[e]=o[e];return i.sid=t.sid=function(n){this.invoked||this();return n=JSON.stringify(n),this.sids[n]||(this.sids[n]=r(n))}.bind(i),i.queue=[],i.sids={},t.initer=i,t.processes={},i.cache=function(n){t.cache=n},i}n.define("service",e),n.fake("service",function(o,s){var n=e(),u=(n.fake=!0,{faker:n,url:o,components:s});return Binh.require(o,function(n){if(null==n)throw new Error("Undefined Service: "+o);s[o]=n,e=(n=u).faker,n=n.components[n.url],delete e.fake,n.sids=e.sids,e.cache(n());var e,t=e,i=t.queue;if(!t.fake)for(;i.length;){var r=i.shift();t[r.type](r.name).apply(null,r.args)}}),n});var r=window.Symbol||function(n){var e=""+Date.now()+Binh.iid();try{return n+e}catch(n){return e}},o={};function a(n,e,t){var i,r,o,s=n();return n.fake?s[t]||(s[t]=(i=n,r=e,o=t,function(){if(!i.fake)return i[r](o).apply(null,arguments);i.queue.push({type:r,name:o,args:arguments})})):s[t]}o.instant=function(n){return a(this,"instant",n)},o.once=function(n){var e=this,t=!1,i=a(e,"once",n);return function(){if(!t)return t=!0,i instanceof Function?i.apply(e,arguments):void 0}},o.debounce=function(n,e,t,i){var r,o,s,u=this,c=a(u,"debounce",n);return function(){c instanceof Function&&(o=arguments,t&&!r&&c.apply(u,o),clearTimeout(r),r=setTimeout(function(){t&&(i||s)||c.apply(u,o),s=r=null},e),s=null==s)}},o.throttle=function(n,e){var t=this,i=!1,r=a(t,"throttle",n);return function(){i||(i=!0,r instanceof Function&&r.apply(t,arguments),setTimeout(function(){i=!1},e))}}}(),function(){var n=Binh.Component;function t(n){var e,t,i=this,r=i.id="binh"+Binh.iid(),n=(i.rules=[],n(function(n,e){var t;"string"==typeof n&&(n=n.replace(/\s+/g," "),t="",e instanceof Array&&(t="{"+e.join(";")+"}"),this.rules.push({selector:n,value:t}))}.bind(i))),o=r,s=i.rules,u=s.length;if(u){for(var c=d(o).sheet,a=u-1;0<=a;a--){var f=s[a],l=f.value?f.selector+f.value:f.selector;try{c.insertRule(l)}catch(n){console.log(f.selector,n)}}h(c,o)}e=r,"string"==typeof(u=n)&&((t=d(e+"x")).appendChild(document.createTextNode(u)),t.onload=function(){var n=t.sheet;n&&!n.prefixed&&(h(t.sheet,e),t.onload=null)}),delete i.rules}function h(n,e){!function e(t,i){if(t.prefixed)return;var n;try{n=t.cssRules}catch(n){return(t.timeout=t.timeout||0,200<t.timeout)?Binh.error("css",{error:n,sheet:t}):void setTimeout(function(){t.timeout++,e(t,i)},t.timeout)}var r=n.length,o=i+" ",s=/^binh($|[^\w-])/,u=/^:root($|[^\w-])/,c=/^xbinh($|[^\w-])/;for(var a=0;a<r;a++){var f=n.item(a);if(f instanceof CSSStyleRule){var l=f.selectorText;f.selectorText=l.match(s)?l.replace(s,i+"$1"):l.match(u)?l.replace(u,i+"$1"):l.match(c)?l.replace(c,"$1"):o+l}else if(f instanceof CSSImportRule){var l=f.styleSheet,h=l.refs=t.refs||{};if(h[l.href])continue;e(l,i)}f.cssRules&&e(f,i)}t.prefixed=!0}(n,"."+e)}function d(n){var e=document.createElement("style");return e.id=n,document.head.appendChild(e),e}function i(n,e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=n,t.crossOrigin="",document.head.appendChild(t),e&&(t.id=e,t.onload=function(){t.onload=null,h(t.sheet,e)})}n.define("style",function(n){return new t(n)}),n.fake("style",function(n){var e=new t(function(){});return i(n=n.replace(/\.css\.js$/,".css"),e.id),e}),Binh.link=function(n){i(n)}}(),function(){var n=Binh.Component;function i(n,e){e&&e.style&&e.style.apply(e,n)}n.define("ui",function(n){return e={context:{shared:{}},component:n},(t=function(){var n=this.component.apply(this.context,arguments),e=this.styles;e instanceof Array&&(n instanceof Array?n.forEach(i.bind(null,e)):i(e,n));{var t;n instanceof Array&&(t=new Binh.ElementNode(new DocumentFragment),n.forEach(function(n){t(n)}),n=t)}return n}.bind(e)).style=function(n){return e.styles=n,t},t;var e,t}),n.fake("ui",function(e,t){var i={fakers:[],url:e,components:t},n=function(){var n,e=this.components[this.url];return e.fake?(n=Binh.el("fake")(),this.fakers.push(n),n.fake=!0,n.args=arguments,n):e.apply(null,arguments)}.bind(i);return n.fake=!0,Binh.require(e,function(n){if(null==n)throw new Error("Undefined UI: "+e);var a;t[e]=n,a=i.components[i.url],i.fakers.forEach(function(t){var n,e=t.element,i=a.apply(null,t.args);if(i){if(i.actions||t.actions){var r,o,s=i.actions||{},u=t.actions||{};for(r in u)s[r]=u[r];for(o in s)u[o]=s[o];i.actions=t.actions=u}else i.actions=t.actions={};i.customs&&(t.customs=i.customs),i.styles&&(t.styles=i.styles),i.fake?(n=i.queue||(i.queue=[])).push(function(){n.push(c)}):c(),t(Array.prototype.slice.call(e.childNodes)),t.class(e.className)}function c(){delete t.fake,t.ref(i);for(var n=t,e=n.queue||[];e.length;)e.shift()(n);delete n.queue}})}),n})}(),function(){function i(n){function e(){var s=arguments;return f(e,function(n){for(var e=s.length,t=n.element,i=c,r=0;r<e;r++){var o=s[r];i(o)(t,o)}}),e}for(var t in r)e[t]=r[t];return(n.enode=e).element=n,e.constructor=i,e}Binh.ElementNode=i;var r={};function t(n,e,t,i){return f(n,function(n){Binh.state[e](t,i,n)})}function n(n){for(var e=n.length,t=[],i=0;i<e;i++){var r=n[i];"string"==typeof r&&(r=r.trim())&&t.push.apply(t,r.split(/\s+/))}return t}function e(n,e,t){return f(n,function(n){n=n.element.classList;n&&n[e].apply(n,t)})}function o(e,t,n){return t instanceof Function?t.bind(null,e):function(){n.forEach(function(n){n.toggleClass(t,e)})}}r.set=function(e){return f(this,function(n){(e.enode=n).onref instanceof Function?n.onref(e):n.element=e})},r.ref=function(i){return f(this,function(n){var e=n.onref||i.onref||function n(e){n.enodes.forEach(function(n){n.element=e})},t=e.enodes||(e.enodes=[]);n.onref||t.push(n),i.onref||t.push(i),n.onref=i.onref=e,n.swap(i)})},r.swap=function(r){return f(this,function(n){var e=n.element,t=e.parentNode,i=r.element;t&&t.replaceChild(i,e),n.set(i)})},r.ready=function(n){return f(this,n)},r.on=function(e,t,i){return f(this,function(n){n.element.addEventListener(e,t,i)})},r.off=function(e,t,i){var r=arguments;return f(this,function(n){n=n.element;if(r.length)return n.removeEventListener(e,t,i);n&&n.parentNode&&n.parentNode.removeChild(n)})},r.race=function(n,i,r){var o=(""+n).split(" ");return f(this,function(n){var e=n.element;function t(n){o.forEach(function(n){e.removeEventListener(n,t,r)}),r&&r.once||e.addEventListener(n.type,i,r),i(n)}o.forEach(function(n){e.addEventListener(n,t,r)})})},r.when=function(n,e){var t=l(this,"actions",{});if("string"!=typeof n)for(var i in n)n[i]instanceof Function&&(t[i]=n[i]);else e instanceof Function&&(t[n]=e);return this},r.action=function(e){var t=this;return function(){var n=l(t,"actions",{})[e];if(n)return{value:n.apply(null,arguments)}}},r.subscribe=function(e,t){return f(this,function(n){Binh.state.listen(e,t,n)})},r.listen=function(n,e){return t(this,"listen",n,e)},r.read=function(n,e){return t(this,"read",n,e)},r.cache=function(n,e){return t(this,"cache",n,e)},r.peek=function(n,e){return t(this,"peek",n,e)},r.clone=function(e){return f(this,function(n){e instanceof Function&&e(new i(n.element.cloneNode()))})},r.empty=function(){return f(this,function(n){n.element.textContent=""})},r.new=function(){return this.empty().apply(null,arguments)},r.css=function(i){return f(this,function(n){var e,t=n.element.style;for(e in i)0==e.indexOf("--")?t.setProperty(e,i[e]):t[e]=i[e]})},r.style=function(){for(var n=arguments,e=n.length,t=[],i=0;i<e;i++){var r=n[i],r="string"==typeof r?Binh.style(r):r;t.push(r.id)}return f(this,function(n){var e=l(n,"styles",[]),e=(e.push.apply(e,t),n.element.classList);e.add.apply(e,n.styles)})},r.nostyle=function(){return f(this,function(n){var e=n.element.classList;e.remove.apply(e,n.styles),n.styles=[]})},r.custom=function(){var i=n(arguments);return f(this,function(n){var e=n.customs||[],t=n.element.classList;t.remove.apply(t,e),t.add.apply(t,i),n.customs=i})},r.class=function(n,e){return 0==e?this.removeClass(n):this.addClass(n),this},r.addClass=function(){return e(this,"add",n(arguments))},r.removeClass=function(){return e(this,"remove",n(arguments))},r.toggleClass=function(){return e(this,"toggle",arguments)},r.each=function(i,r){return f(this,function(n){for(var e=i&&i.length,t=0;t<e;t++)n(r(i[t]))})},r.as=function(n,e){if(n instanceof Object)return"string"==typeof e?n[e]=this:n.enode=this,this},r.resize=function(r){return f(this,function(n){var e={matched:!1,enode:n},t=function(n,e,t){var i=this;n=i.called?i.matched:!!n,i.called=!0,i.matched===n&&!i.called||(i.matched=n,requestAnimationFrame(o(n,e,t)))}.bind(e);function i(){i.wait||(document.contains(n.element)?(i.wait=1,requestAnimationFrame(function(){i.wait=0,e.called=!1,r(t)})):window.removeEventListener("resize",i))}window.addEventListener("resize",i),setTimeout(i)})},r.screen=function(t,i){return f(this,function(e){o(s<=t,i,[e])(),e.resize(function(n){n(s<=t,i,[e])})})};var s=window.innerWidth,u=(window.addEventListener("resize",function(){s=window.innerWidth}),r.route=function(e){return f(this,function(n){n.router=new Binh.Router(e,{enode:n})})},{object:function(e,n){if(null!=n){if(n instanceof Node)return e.appendChild(n);switch(n.constructor){case Array:n.forEach(function(n){c(n)(e,n)});break;case Binh.Router:case DocumentFragment:case Element:e.appendChild(n.element||n);break;default:for(var t in n)!1===n[t]?e.removeAttribute(t):e.setAttribute(t,n[t])}}},function:function(n,e){switch(e.constructor){case i:n.appendChild(e.element);break;case Function:var t=e(n);c(t)(n,t)}},undefined:function(){}});function c(n){return u[typeof n]||a}function a(n,e){try{n.appendChild(document.createTextNode(e))}catch(n){}}function f(n,e){return e instanceof Function&&(n.fake?(n.queue=n.queue||[]).push(e):e(n)),n}function l(n,e,t){return n[e]||(n[e]=t)}var h={};function d(n){var e=Array.prototype.slice.call(arguments,1),t=document.createElement(n);return t.constructor=Element,new i(t).apply(0,e)}function p(n,e){return h[n]||(e=h[n]=d.bind(0,n))&&(e.constructor=d,e)}Binh.el=p,Binh.element=function(){for(var n=arguments,e=n.length;e--;)p(n[e]);return h},Binh.els=h;var v={};function m(n){var e=Array.prototype.slice.call(arguments,1),t=document.createElementNS("http://www.w3.org/2000/svg",n);return t.constructor=Element,new i(t).apply(0,e)}function y(n,e){return v[n]||(e=v[n]=m.bind(0,n))&&(e.constructor=m,e)}Binh.svg=y,Binh.svgs=function(){for(var n=arguments,e=n.length;e--;)y(n[e]);return v},Binh.SVGs=v}(),function(){function n(n){this.url=n,this.parameters=[]}var e=(Binh.http=n).prototype;n.defer=function(n){var arguments=n instanceof Array?n:arguments||[n],e=arguments.length,t=[],i=function(){};t.count=0,t.results=[],t.ready=function(n){this.count++,this.results[n.index]=n,this.count===this.length&&i instanceof Function&&i.apply(null,this.results)};for(var r=0;r<e;r++){var o=arguments[r];o.defers=o.defers||[],o.defers.push({defer:t,index:r}),t.push(o)}return{done:function(n){i=n instanceof Function?n:function(){}}}},e.get=function(n){return this.request("GET",n)},e.post=function(n){return this.request("POST",n)},e.request=function(n,e){var t,i=this.init(e),r=(i.open(n,this.url+this.parameters.join("/")+(this.queries||"")),this.payload&&i.setRequestHeader("Content-Type","application/json"),this.headers);for(t in r)i.setRequestHeader(t,r[t]);return this.token&&i.setRequestHeader("Authorization","Bearer "+this.token),i.responseType="text",i.send(this.payload),this},e.init=function(n){var t=this,i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE){var e;try{e=JSON.parse(i.responseText)}catch(n){e=i.responseText}n instanceof Function&&n(e,i),t.defers instanceof Array&&t.defers.forEach(function(n){n.defer.ready({response:e,xhttp:i,index:n.index})})}},i},e.auth=function(n){return n&&(this.token=n),this},e.header=function(n){return this.headers=n,this},e.body=function(n){return this.payload=JSON.stringify(n),this},e.parameter=function(n){var e;return n instanceof Array&&(e=this.url[this.url.length-1],this.parameters=("/"===e?[]:[""]).concat(n)),this},e.query=function(n){var e,t="";for(e in n)t+=e+"="+n[e]+"&";return this.queries="?"+t,this}}(),function(){function u(n,e){var t,i=this,r=c(n=n||{}),e=e||{},o=Binh.Util.domced,s=(i.enode=e.enode||Binh.ElementNode(e.element||document.createElement("div")),i.element=i.enode.element,i.constructor=u,i.load=function(n){var e;o(i)?(n=!(n instanceof Event),((e=a(r).component)&&e!==t||n)&&(l=!0,h[typeof(t=e)](e,i))):(window.removeEventListener("popstate",s),window.removeEventListener("load",s))});window.addEventListener("popstate",s),window.addEventListener("load",s),f&&(f(),f=null),i.load()}function c(n){var e,t=[];for(e in n)t.push({route:e,segments:e.split("/"),component:n[e]});return t.sort(function(n,e){return e.segments.length-n.segments.length||e.route.length-n.route.length}),t}function a(n){var e,t=location.pathname.split("/"),i={};for(e in n){var r=n[e],o=r.segments;if(!(t.length<o.length)){for(var s=!0,u=0;u<o.length;u++){var c=o[u],a=t[u];if(c.match(/^:/))i[c.slice(1)]=a;else if(t.indexOf(c)!==u){s=!1;break}}if(s)return{component:r.component,parameters:i}}}return{}}Binh.Router=u;var f,l,e=function(){};function n(){if(!n.init)return n.init=!0;e()}window.addEventListener("popstate",n),window.addEventListener("load",n),u.onroute=function(n){n instanceof Function&&(e=f=n)},u.navigate=function(n,e){var t=location.href.replace(location.origin,"");t===n||(l=!1,history.pushState(e||{},"",n),Binh.Util.emitEvent(window,"load"),l)||history.replaceState(e||{},"",t)},u.match=function(n){var e={};return e[n]=!0,!!a(c(e)).component},u.query=function(e){var t,i=[],r=JSON.stringify;return location.search.substring(1).split("&").forEach(function(n){if(!e)try{n=decodeURIComponent(n)}catch(n){}t=n.split("="),i.push(r(t.shift())+":"+r(t.join("=")))}),JSON.parse("{"+i.join(",")+"}")};var h={string:function(n,e){n=Binh.ui(n);h.function(n,e)},number:function(n,e){e.element.appendChild(document.createTextNode(n))},function:function(n,e){n=n.element||n();if("string"==typeof n)return this.string(n,e);(n instanceof Node||(n=n.element)instanceof Node)&&(e.element=e.enode.empty()(n).element)},undefined:function(){}}}(),Binh.State=function(){var t={};function a(n){var e=t[n]||{};return t[n]=e}function r(n,e,t){n.set&&e instanceof Function&&e(n.value,t)}this.set=function(n,e){var t=a(n);t.value=e,this.emitLater(n,t)},this.edit=function(n,e){var t=a(n),i=t.value;e instanceof Function?t.value=e(i):i instanceof Object&&e instanceof Object?Object.assign(i,e):t.value=e,this.emitLater(n,t)},this.emitLater=function(n,e){e.set=!0;var t=this;clearTimeout(e.emitId),e.emitId=setTimeout(function(){t.emit(n,e)})},this.emit=function(n,i){for(var r=(i=i||a(n)).listeners||[],o=Binh.Util.domced,e=(r.forEach(function(n,e){var t=n.enode;o(t)?n.handler(i.value,t):r.splice(e,1)}),i),t=e.readers||[],s=Binh.Util.domced;t.length;){var u=t.shift(),c=u.enode;s(c)&&u.handler(e.value,c)}},this.listen=function(n,e,t){var i=a(n);(i.listeners||(i.listeners=[])).push({enode:t,handler:e}),this.update(n,i),r(i,e,t)},this.read=function(n,e,t){var i=a(n);(i.readers||(i.readers=[])).push({enode:t,handler:e}),this.update(n,i),r(i,e,t)},this.cache=function(n,e,t){var i=a(n);i.set?r(i,e,t):this.read(n,e,t)},this.peek=function(n,e,t){e instanceof Function&&e(a(n).value,t)},this.serve=function(n,e){var t,i=a(n);e instanceof Function&&(i.fetch=e,e=i.listeners||[],t=i.readers||[],e.length||t.length)&&this.update(n,i)},this.schema=this.serve,this.update=function(e,t){var i;(t=t||a(e)).fetch instanceof Function&&(t.fetching||t.debounce||(t.fetching=!0,i=this,t.fetch(function(n){t.debounce=!0,t.set=!0,i.set(e,n),t.fetching=!1,setTimeout(function(){delete t.debounce},3e3)})))},this.as=function(n){var e=a(n);if(e.as)return e.as;var t,i=e.as={};for(t in this)i[t]=this[t].bind(this,n);return i}},Binh.Util={emitEvent:function(n,e){var t;document.createEvent?("function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!1,!0),n.dispatchEvent(t)):((t=document.createEventObject()).eventName=t.eventType=e,n.fireEvent("on"+t.eventType,t))},domced:function(n){var e=n&&n.element instanceof Node,t=document.contains(n&&n.element),i=n&&n.domed;return t&&!i&&(n.domed=!0),!(e&&i&&!t)}};