function Binh(e,n){var t,i=Binh,r=new i.State,o="DOMContentLoaded";function s(){t?t(u):u()}function u(){document.removeEventListener(o,s),(n=n||{}).element=n.element||document.body,i.router=new i.Router(e,n)}i.state=function(e){return arguments.length?r.as(e):r},i.onlaunch=function(e){t=Binh.to.func(e)},document.addEventListener(o,s)}!function(){function t(e,n){if(!n)return e?i[e]:i;(e=i[e]=i[e]||[]).length<t.limit&&e.push(n)}Binh.iid=function(){return this.iid++}.bind({iid:0}),Binh.air=function(e){return e=e||"air"+Date.now()+Binh.iid(),Binh.el(e)().css({position:"fixed",width:0,height:0})};var i={},r=(t.limit=10,Binh.error=t,{}),o={};Binh.Q={wait:function(e,n){(r[e]||(r[e]=[])).push(n)},done:function(e,n){if(n instanceof Function?n():n)for(var t=r[e]||(r[e]=[]);t.length;)t.pop()()},on:function(e){o[e]=this.count(e)+1},off:function(e,n){var t=this.count(e)-1,t=Math.max(t,0);o[e]=t,n&&this.check(e)},count:function(e){return o[e]||(o[e]=0)},check:function(e){this.count(e)<=0&&this.done(e,!0)}},window.addEventListener("load",function e(){Binh.loaded=!0;Binh.Q.check("style");window.removeEventListener("load",e)}),document.addEventListener("click",function(e){var n,t=e.target;if(Element.prototype.closest)t=t.closest("a");else for(;t&&"A"!==t.tagName;)t=t.parentNode;t&&!t.getAttribute("target")&&(n=t.getAttribute("href"))&&(0===n.indexOf("/")?(e.preventDefault(),Binh.Router.navigate(n)):0!==n.indexOf("#")&&0!==n.search(/^\w+:/)&&""!==n&&(e.preventDefault(),(e=location.pathname.split("/")).pop(),e.push(n),Binh.Router.navigate(e.join("/"))))}),Binh.syncSeqMaps=function(e,n,t){t.forEach(Binh.syncSeqMap.bind(null,e,n))},Binh.syncSeqMap=function(e,n,t){if(n[t]||e[t]){var i,r,o=n[t]||{},s=e[t]||{};for(i in s)o[i]=s[i];for(r in o)s[r]=o[r];n[t]=e[t]=s}else n[t]=e[t]={}},Binh.syncSeqArrays=function(e,n,t){t.forEach(Binh.syncSeqArray.bind(null,e,n))},Binh.syncSeqArray=function(e,n,t){var i,r,o,s;n[t]||e[t]?(r=n[t]||[],i=e[t]||[],r=r.concat(i),o={},s=[],r.forEach(function(e){o[e]||s.push(e)}),i.length=0,i.push.apply(i,s),n[t]=e[t]=i):n[t]=e[t]=[]}}(),function(){var u,t=Binh,r=t.Component={},o={},s={},c={},a={},f={};function l(e,n){var t=n instanceof Function?n:function(){},i=document.createElement("script");i.src=e,document.head.appendChild(i),i.remove(),i.onload=function(){var e=u;u=null,e instanceof d?e.loaded=i.onload:t(e)},i.onerror=function(){t()}}function h(e,n){function t(){e&&e.forEach(function(e){e()})}n?setTimeout(t):t()}function d(){}r.create=function(e,n){return c[e](n)},r.define=function(i,e){c[i]=e,t[i]=function(e,n){var t=i;return e&&"string"==typeof e?o.hasOwnProperty(e)?o[e]:n instanceof Function?o[e]=r.create(t,n):o[e]=s[t](e,o):e instanceof Function?u=r.create(t,e):r.create(t,n)}},r.fake=function(e,n){s[e]=n},t.require=l,t.script=function(e,n){t.prequire([e],n),u=null},t.prequire=function(e,n){var i,r,o=e.length,s=n instanceof Function?n:function(){};o?(i=u=new d,r=[],e.forEach(function(e){var n=f[e];function t(){a[e]=!0,--o||(s(),i.loaded&&i.loaded()),h(n),delete f[e]}a[e]?r.push(t):n?n.push(t):(n=f[e]=[],l(e,t))}),r.length&&h(r,!0)):s()}}(),function(){var i="service",e=Binh.Component;e.define(i,function(e){return(n=function(){var e,n=this.func;if(n instanceof Function)return e={service:Binh.service,http:Binh.http,sid:this.sid,state:function(e){var n=e.shared||{usid:Symbol("sv")},t=n.usid;return delete e.shared,n.state=n.state||function(e){return(n.localState||(n.localState=new Binh.State({name:"local"}))).as(e)},function(e){return n.state(arguments.length?e:t)}}(this)},n.apply(e,arguments)}.bind(e={func:e=e})).context=e,n.sid=e.sid=function(e){return e=JSON.stringify(e),this.sids[e]||(this.sids[e]=Symbol(e))}.bind({sids:{}}),n.service=function(e){return e.forEach(Binh.service),n},n;var n}),e.fake(i,function(n,t){Binh.Q.on(i),Binh.require(n,function(e){if(null==e)throw Binh.Q.off(i,!0),new Error("No Service: "+n);t[n]=e,Binh.Q.off(i,!0)})})}(),function(){var t="style",e=Binh.Component;function i(e){var n=this,t=n.id="binh"+Binh.iid();if(null==e)return n;n.rules=[];var i,r,e=e(function(e,n){var t;"string"==typeof e&&(e=e.replace(/\s+/g," "),t="",n instanceof Array&&(t="{"+n.join(";")+"}"),this.rules.push({selector:e,value:t}))}.bind(n)),o=t,s=n.rules,u=s.length;if(u){for(var c=d(o).sheet,a=u-1;0<=a;a--){var f=s[a],l=f.value?f.selector+f.value:f.selector;try{c.insertRule(l)}catch(e){console.log(f.selector,e)}}h(c,o)}i=t,"string"==typeof(u=e)&&((r=d(i+"x")).appendChild(document.createTextNode(u)),p(),r.onload=function(){var e=r.sheet;e&&!e.prefixed&&(h(r.sheet,i),r.onload=null),v()},r.onerror=v),delete n.rules}function h(e,n){!function n(t,i){if(t.prefixed)return;var e;try{e=t.cssRules}catch(e){return(t.timeout=t.timeout||0,200<t.timeout)?Binh.error("css",{error:e,sheet:t}):void setTimeout(function(){t.timeout++,n(t,i)},t.timeout)}var r=e.length,o=i+" ",s=/^:root($|[^\w-])/,u=/:scope($|[^\w-])/g;for(var c=0;c<r;c++){var a=e.item(c);if(a instanceof CSSStyleRule){var f=a.selectorText,l=m(f);l.forEach(function(e,n){l[n]=e.match(u)?e.replace(u," "+i+"$1"):e.match(s)?e:o+e}),a.selectorText=l.join(",")}else if(a instanceof CSSImportRule){var f=a.styleSheet,h=f.refs=t.refs||{};if(h[f.href])continue;n(f,i)}a.cssRules&&n(a,i)}t.prefixed=!0}(e,"."+n)}function d(e){var n=document.createElement(t);return n.id=e,document.head.appendChild(n),n}function r(e,n){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.crossOrigin="",document.head.appendChild(t),p(),n&&(t.id=n,t.onload=function(){t.onload=null,h(t.sheet,n),v()},t.onerror=v)}function p(){Binh.Q.on(t)}function v(e){if(Binh.Q.off(t,Binh.loaded),e)throw e}function m(e){for(var n=[],t="",i=!1,r=0,o=0,s=0;s<e.length;s++){var u=e[s];if('"'===u||"'"===u&&"\\"!==e[s-1])i=!i;else if(!i)if("["===u)r++;else if("]"===u)r--;else if("("===u)o++;else if(")"===u)o--;else if(","===u&&0===r&&0===o){n.push(t.trim()),t="";continue}t+=u}return t.trim()&&n.push(t.trim()),n}e.define(t,function(e){return new i(e)}),e.fake(t,function(e){var n=new i;return r(e=e.replace(/\.css\.js$/,".css"),n.id),n}),Binh.link=function(e){r(e)}}(),function(){var r,s="style",e=Binh.Component;function u(e,n,t){Binh.Q.wait(e,t),n&&Binh.Q.check(e)}function o(e,n){n&&n.style&&n.style.apply(n,e)}function c(e,n,t){var i=this,e=e.apply(0,n);return e instanceof Binh.StateAlias?(i.listeners=i.listeners||[],i.listeners.push({state:e,sid:e.sid,handler:function(e,n){i.useState=function(e,n,t){return t.state?t.state.get():c.call(i,e,n,t)},i.service=function(e){return(n.services||{})[e]||a.call(i,e)};var t=i.UIComp.apply(null,n.args2);i.useState=c,i.service=a,n.swap(t)}}),(t.state=e).get()):(t.state=null,e)}function a(e){var n=e.split("/").pop().split(".")[0],t=this,i=Binh.iid(),r=Symbol("usid:"+t.id+":"+n+":"+i),o=Binh.service(e),s={},u=t.shared||(t.shared={});function c(){return u.usid=r,o.context.shared=u,t.useState(o,arguments,s)}return c.sid=function(e){return o.sid(e)},c.state=function(e){return u.state=u.state||function(e){return(u.localState||(u.localState=new Binh.State({name:"local"}))).as(e)},u.state(arguments.length?e:r)},t.services=t.services||{},t.services[e]=c}e.define("ui",function(e){return e=e,n={id:Binh.iid(),useState:c,service:a,isRerender:function(){return this.useState!==c}},t={thisUI:n,func:e},(i=function(){var e=this.thisUI,n=this.styles,t=e.useState===c,i=this.func.apply(e,arguments);n instanceof Array&&(i instanceof Array?i.forEach(o.bind(null,n)):o(n,i));i instanceof Array&&(n=new Binh.ElementNode(new DocumentFragment),i.forEach(n),i=n);i&&(i.args2=arguments);t&&i&&(i.services=e.services,Binh.to.array(e.listeners||[],"sid").forEach(function(e){e.state.listen(e.handler,i)}));return delete e.services,delete e.listeners,delete e.shared,u(s,Binh.loaded,function(){clearTimeout(r),r=setTimeout(function(){Binh.state().clean()})}),i}.bind(t)).style=function(e){return t.styles=e,i},i.loadStyles=function(){(t.styles||[]).forEach(Binh.style)},i.service=function(e){return e.forEach(Binh.service),i},i.shared=t.shared={},n.UIComp=i;var n,t,i}),e.fake("ui",function(i,r){var o={fenodes:[],url:i,components:r},e=function(){var e,n=this.components[this.url];return n.fake?((e=Binh.air("fake")).fake=!0,e.args=arguments,this.fenodes.push(e),e):n.apply(null,arguments)}.bind(o);return e.fake=!0,Binh.require(i,function(t){if(null==t)throw new Error("No UI: "+i);t.shared.url=i,t.loadStyles(),u("service",!0,function(){var e,n;r[i]=t,n=(e=o).components[e.url],e.fenodes.forEach(function(t){t.element;var i=n.apply(null,t.args);i&&(i.url=e.url,t.url=e.url,Binh.syncSeqMap(t,i,"actions"),i.customs&&(t.customs=i.customs),i.styles&&(t.styles=i.styles),u(s,Binh.loaded,function(){function e(){delete t.fake,t.ref(i);for(var e=t,n=e.queue||[];n.length;)n.shift()(e);delete e.queue}i.fake?i.ready(function(){i.queue.push(e)}):e()}))})})}),e})}(),function(){function i(e){function n(){var s=arguments;return h(n,function(e){for(var n=s.length,t=e.element,i=f,r=0;r<n;r++){var o=s[r];i(o)(t,o)}}),n}for(var t in r)n[t]=r[t];return(e.enode=n).element=e,n.constructor=i,n}Binh.ElementNode=i;var r={};function s(e,n){return e.enode=e.target.enode||Binh.ElementNode(e.target),e.currentEnode=n,e}function u(e){var n;return"string"!=typeof e?{name:e,css:""}:{name:n=(e=e.trim()).split(" ",1)[0],css:e.split(n,2).join("").trim()}}function t(e,t,i,r){return h(e,function(e){var n;i instanceof Binh.StateAlias?n=i:i instanceof Function&&i.state instanceof Function?n=i.state():i instanceof Object&&(i=i.sid instanceof Function?i.sid():i.hasOwnProperty("sid")?i.sid:i.sid=Symbol()),(n=n||Binh.state(i))[t](r,e)})}function e(e){for(var n=e.length,t=[],i=0;i<n;i++){var r=e[i];"string"==typeof r&&(r=r.trim())&&t.push.apply(t,r.split(/\s+/))}return t}function n(e,n,t){return h(e,function(e){e=e.element.classList;e&&e[n].apply(e,t)})}function o(n,t,e){return t instanceof Function?t.bind(null,n):function(){e.forEach(function(e){e.toggleClass(t,n)})}}r.set=function(n){return h(this,function(e){(n.enode=e).onref instanceof Function?e.onref(n):e.element=n})},r.ref=function(i){return h(this,function(e){var n=e.onref||i.onref||function e(n){e.enodes.forEach(function(e){e.element=n})},t=n.enodes||(n.enodes=[]);e.onref||t.push(e),i.onref||t.push(i),e.onref=i.onref=n,e.swap(i)})},r.swap=function(r){return h(this,function(e){var n=e.element,t=n.parentNode,i=r.element;t&&t.replaceChild(i,n),e.set(i)})},r.ready=function(e){return h(this,e)},r.emit=function(n){return h(this,function(e){Binh.Util.emitEvent(e.element,n)})},r.on=function(e,o,n){return o instanceof Function?h(this,function(r){(e instanceof Array?e:[e]).forEach(function(e){function t(e){var n;i.css?(n=e.target.closest(i.css))&&e.currentTarget.contains(n)&&(e.target=n,o(s(e,r))):o(s(e,r)),o.cb=t}var i=u(e);o.cb=t,r.element.addEventListener(i.name,t,n)})}):this},r.off=function(t,i,r){var o=arguments;return h(this,function(e){var n=e.element;!o.length&&n&&n.parentNode?n.parentNode.removeChild(n):i instanceof Function&&(t instanceof Array?t:[t]).forEach(function(e){e=u(e);n.removeEventListener(e.name,i.cb||i,r)})})},r.race=function(e,i,r){var o=(""+e).split(" ");return h(this,function(e){var n=e.element;function t(e){o.forEach(function(e){n.removeEventListener(e,t,r)}),r&&r.once||n.addEventListener(e.type,i,r),i(e)}o.forEach(function(e){n.addEventListener(e,t,r)})})},r.remove=function(){return h(this,function(e){e=e.element;e&&e.parentNode&&e.parentNode.removeChild(e)})},r.when=function(e,n){var t=d(this,"actions",{});if("string"!=typeof e)for(var i in e)e[i]instanceof Function&&(t[i]=e[i]);else n instanceof Function&&(t[e]=n);return this},r.action=function(n){var t=this;return function(){var e=d(t,"actions",{})[n];if(e)return{value:e.apply(null,arguments)}}},r.value=function(n,t){return arguments.length?h(this,function(e){e.element.value=n,"string"==typeof t&&e.emit(t)}):this.element.value},r.listen=function(e,n){return t(this,"listen",e,n)},r.read=function(e,n){return t(this,"read",e,n)},r.request=function(e,n){return t(this,"request",e,n)},r.clone=function(n){var t=new i(document.createElement("clone"));return h(this,function(e){e=new i(e.element.cloneNode(n));t.swap(e)}),t},r.empty=function(){return h(this,function(e){e.element.textContent=""})},r.new=function(){var n=arguments;return h(this,function(e){e.empty().apply(null,n)})},r.css=function(i,r){return h(this,function(e){var n,t=e.element.style;for(n in"string"==typeof i&&((e={})[i]=r,i=[e]),i)0==n.indexOf("--")?t.setProperty(n,i[n]):t[n]=i[n]})},r.style=function(){for(var e=arguments,n=e.length,t=[],i=0;i<n;i++){var r=e[i],r="string"==typeof r?Binh.style(r):r;r&&r.id&&t.push(r.id)}return h(this,function(e){var n=d(e,"styles",[]),n=(n.push.apply(n,t),e.element.classList);n.add.apply(n,e.styles)})},r.nostyle=function(){return h(this,function(e){var n=e.element.classList;n.remove.apply(n,e.styles),e.styles=[]})},r.custom=function(){var i=e(arguments);return h(this,function(e){var n=e.customs||[],t=e.element.classList;t.remove.apply(t,n),t.add.apply(t,i),e.customs=i})},r.class=function(e,n){return 0==n?this.removeClass(e):this.addClass(e),this},r.addClass=function(){return n(this,"add",e(arguments))},r.removeClass=function(){return n(this,"remove",e(arguments))},r.toggleClass=function(){return n(this,"toggle",arguments)},r.each=function(i,r){return h(this,function(e){var n=i&&i.length;r=r instanceof Function?r:function(e){return e};for(var t=0;t<n;t++)e(r(i[t],t,i))})},r.as=function(e,n){if(e instanceof Object)return"string"==typeof n?e[n]=this:e.enode=this,this},r.for=function(e,n){var t=Number.isNaN;if(!t(e)&&null!=e){if(!0===n){var i=e instanceof Array;if((i||"string"==typeof e)&&!e.length)return;if(i){var i=e.filter(function(e){return!(t(e)||null==e)});if(!i.length)return;e=i}}else if(n instanceof Function)return i=n(e,this),this.for(i);return this(e)}},r.resize=function(r){return h(this,function(e){var n={matched:!1,enode:e},t=function(e,n,t){var i=this;e=i.called?i.matched:!!e,i.called=!0,i.matched===e&&!i.called||(i.matched=e,requestAnimationFrame(o(e,n,t)))}.bind(n);function i(){i.wait||(document.contains(e.element)?(i.wait=1,requestAnimationFrame(function(){i.wait=0,n.called=!1,r(t)})):window.removeEventListener("resize",i))}window.addEventListener("resize",i),setTimeout(i)})},r.screen=function(t,i){return h(this,function(n){o(c<=t,i,[n])(),n.resize(function(e){e(c<=t,i,[n])})})};var c=window.innerWidth,a=(window.addEventListener("resize",function(){c=window.innerWidth}),r.route=function(n){return h(this,function(e){e.router=new Binh.Router(n,{enode:e})})},r.parent=function(n){return h(this,function(e){e=e.element.parentNode;e&&e.enode&&e.enode(n)})},{object:function(n,e){if(null!=e){if(e instanceof Node)return n.appendChild(e);switch((e="Arguments"===Binh.typeOf(e)?Array.prototype.slice.call(e):e).constructor){case Array:e.forEach(function(e){f(e)(n,e)});break;case Binh.Router:case DocumentFragment:case Element:n.appendChild(e.element||e);break;default:for(var t in e){var i=e[t];i instanceof Object?n[t]=i:!1===i?n.removeAttribute(t):n.setAttribute(t,i)}}}},function:function(e,n){switch(n.constructor){case i:e.appendChild(n.element);break;case Function:var t=n(e);f(t)(e,t)}},undefined:function(){}});function f(e){return a[typeof e]||l}function l(e,n){try{e.appendChild(document.createTextNode(n))}catch(e){}}function h(e,n){return n instanceof Function&&(e.fake?(e.queue=e.queue||[]).push(n):n(e)),e}function d(e,n,t){return e[n]||(e[n]=t)}var p={};function v(e){var n=Array.prototype.slice.call(arguments,1),t=document.createElement(e);return t.constructor=Element,new i(t).apply(0,n)}function m(e,n){return p[e]||(n=p[e]=v.bind(0,e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()))&&(n.constructor=v,n)}Binh.el=m,Binh.element=function(){for(var e=arguments,n=e.length;n--;)m(e[n]);return p},Binh.els=p;var y={};function g(e){var n=Array.prototype.slice.call(arguments,1),t=document.createElementNS("http://www.w3.org/2000/svg",e);return t.constructor=Element,new i(t).apply(0,n)}function w(e,n){return y[e]||(n=y[e]=g.bind(0,e))&&(n.constructor=g,n)}Binh.svg=w,Binh.svgs=function(){for(var e=arguments,n=e.length;n--;)w(e[n]);return y},Binh.SVGs=y}(),function(){function e(e){this.url=e,this.parameters=[],this.callbacks={}}var n=(Binh.http=e).prototype,r=(e.defer=function(e){var n,t=Binh.to.args(e,arguments),i=t.length,r=[];r.count=0,r.results=[],r.ready=function(e){this.count++,this.results[e.index]=e,this.count===this.length&&n instanceof Function&&n.apply(null,this.results)};for(var o=0;o<i;o++){var s=t[o];s.defers=s.defers||[],s.defers.push({defer:r,index:o}),r.push(s)}return{done:function(e){return n=e,this}}},n.get=function(e){return this.request("GET",e)},n.post=function(e){return this.request("POST",e)},n.request=function(e,n){var t=this.callbacks[e]||(this.callbacks[e]=[]);if(t.push(n),!(1<t.length)){var i,r=this.init(function(e){for(;t.length;){var n=t.shift();n instanceof Function&&n(e,r)}}),o=(r.open(e,this.url+this.parameters.join("/")+(this.queries||"")),this.payload&&r.setRequestHeader("Content-Type","application/json"),this.headers);for(i in o)r.setRequestHeader(i,o[i]);this.token&&r.setRequestHeader("Authorization","Bearer "+this.token),this.withCredentials&&(r.withCredentials=!0),r.responseType="text",r.send(this.payload)}return this},n.init=function(e){var t=this,i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE){var n;try{n=JSON.parse(i.responseText)}catch(e){n=i.responseText}o(t,function(){e(n)}),t.defers instanceof Array&&o(t,function(){t.defers.forEach(function(e){e.defer.ready({response:n,xhttp:i,index:e.index})})})}},i},n.auth=function(e){return e&&(this.token=e),this},n.header=function(e){return this.headers=e,this},n.body=function(e){return this.payload=JSON.stringify(e),this},n.parameter=function(e){var n;return e instanceof Array&&(n=this.url[this.url.length-1],this.parameters=("/"===n?[]:[""]).concat(e)),this},n.query=function(e){var n,t="";for(n in e)t+=n+"="+e[n]+"&";return this.queries="?"+t,this},n.credentials=function(){return this.withCredentials=!0,this},function(){});function o(e,n){for(var t=Binh.to.array(e.states);t.length;){var i=t[0];if(!i.isSet()){i.read(function(){o(e,n)});break}t.shift()}t.length||((e.states||[]).forEach(function(e){e.unread(r)}),n())}n.state=function(e){return this.states=Binh.to.args(e,arguments),this.states.forEach(function(e){e.read(r)}),this}}(),function(){var e=Binh.Polyfill={};window.Symbol=window.Symbol||function(e){var n="."+Date.now()+Binh.iid();try{return e+n}catch(e){return n}},e.getOwnPropertySymbols=function(e){return[]},Object.getOwnPropertySymbols=Object.getOwnPropertySymbols||e.getOwnPropertySymbols,Element.prototype.matches=Element.prototype.matches||function(e){for(var n=this,t=n.parentNode,i=(t||(t=document.createElement("div"),n=this.cloneNode(!1),t.appendChild(n)),t.querySelectorAll(selector)),r=0;r<i.length;r++)if(i[r]===n)return!0;return!1},Element.prototype.closest=Element.prototype.closest||function(e){for(var n=this;n&&1===n.nodeType;){if(n.matches(e))return n;n=n.parentNode}return null},Node.prototype.contains=Node.prototype.contains||function(e){if(!(e instanceof Node))throw new TypeError("Argument must be a Node");for(;e;){if(e===this)return!0;e=e.parentNode}return!1}}(),function(){function t(e,n){var o,s,u,c=this,a=i(e=e||{}),n=n||{},f=Binh.Util.domced,l=(c.enode=n.enode||Binh.ElementNode(n.element||document.createElement("div")),c.element=c.enode.element,c.constructor=t,c.getParameters=function(){return o},c.load=function(e){var n,t,i,r;f(c)?null==(t=(n=h(a)).component)?(s=t,c.enode.empty()):(o=n.parameters,e=!(e instanceof Event),i=t!==s,r=JSON.stringify(u)!==JSON.stringify(o),(i||r||e)&&(u=o,d=!0,p[typeof(s=t)](t,c,n))):(window.removeEventListener("popstate",l),window.removeEventListener("load",l))});window.addEventListener("popstate",l),window.addEventListener("load",l),r&&(r(),r=null),c.load()}function i(e){var n,t=[];for(n in e)t.push({route:n,segments:n.split("/"),component:e[n]});return t.sort(function(e,n){return n.segments.length-e.segments.length||n.route.localeCompare(e.route)}),t}function h(e){var n,t=location.pathname.split("/"),i={};for(n in e){var r=e[n],o=r.segments;if(!(t.length<o.length)){for(var s=!0,u=0;u<o.length;u++){var c=o[u],a=t[u];if(c.match(/^:/))i[c.slice(1)]=a;else if(t.indexOf(c)!==u){s=!1,i={};break}}if(s)return{route:r.route,component:r.component,parameters:i}}}return{}}Binh.Router=t;var r,d,n=function(){};function e(){if(!e.init)return e.init=!0;n()}window.addEventListener("popstate",e),window.addEventListener("load",e),t.onroute=function(e){e instanceof Function&&(n=r=e)},t.navigate=function(e,n){var t=location.href.replace(location.origin,"");t===e||(d=!1,history.pushState(n||{},"",e),Binh.Util.emitEvent(window,"load"),d)||history.replaceState(n||{},"",t)},t.match=function(e){var n={};return n[e]=!0,!!h(i(n)).component},t.matchParam=function(e){var n={};return n[e]=!0,h(i(n)).parameters},t.query=function(n){n=n||{};var t,i=[],r=JSON.stringify;return location.search.substring(1).split("&").forEach(function(e){if(!1!==n.decode)try{e=decodeURIComponent(e)}catch(e){}t=e.split("="),i.push(r(t.shift())+":"+r(t.join("=")))}),JSON.parse("{"+i.join(",")+"}")};var p={string:function(e,n,t){e=Binh.ui(e);p.function(e,n,t)},text:function(e,n){n.element.appendChild(document.createTextNode(e))},number:function(e,n){p.text(e,n)},function:function(e,n,t){e=e.element||e(t.parameters,t.route);if("string"==typeof e)return p.string(e,n);(e instanceof Node||e instanceof Array||(e=e&&e.element)instanceof Node)&&(n.element=n.enode.empty()(e).element)},undefined:function(){}}}(),Binh.State=function(e){var n,o=this,t={},s=Binh.StateAlias;function u(e){return t[e]||(t[e]={})}function i(e,n){var t,i,r=e[n];r&&(t=Binh.Util.domced,i=e[n]=[],r.forEach(function(e){t(e.enode)&&i.push(e)}),i.length||delete e[n])}function r(n,e){var t=n[e];n[e]=[],t.forEach(function(e){e.handler(n.value,e.enode),e.invoked=!0}),n[e]=t.concat(n[e])}function c(e,n,t){e.emit&&n instanceof Function&&n(e.value,t)}o._name=(e=e||{}).name,o.get=function(e,n){var t=u(e);return t.emit||void 0===n||o.set(e,n),t.value},o.set=function(e,n,t){var i=u(e);return i.value=n,o.emitLater(e,i,t),this},o.edit=function(e,n,t){var i=u(e),r=i.value;return n instanceof Function?i.value=n(r):r instanceof Object&&n instanceof Object?Object.assign(r,n):i.value=n,o.emitLater(e,i,t),this},o.emitLater=function(e,n,t){n.set=!0,t&&!1===t.emit||(clearTimeout(n.emitId),n.emitId=setTimeout(function(){delete n.emitId,n.emit=!0,o.emit(e,n)}))},o.emit=function(e,n){i(n=n||u(e),"listeners"),i(n,"readers"),n.listeners&&r(n,"listeners"),n.readers&&(r(n,"readers"),n.readers=n.readers.filter(function(e){return!e.invoked}))},o.clean=function(){clearTimeout(n),n=setTimeout(function(){Binh.to.keys(t).forEach(function(e){e=u(e);i(e,"listeners"),i(e,"readers")})})},o.listen=function(e,n,t){var i=u(e),r={enode:t,handler:n};return(i.listeners||(i.listeners=[])).push(r),o.update(e,i),c(i,n,t),r},o.request=function(e,n,t){var i;n instanceof Function&&((i=u(e)).debounce?n(i.value,t):((i.readers||(i.readers=[])).push({enode:t,handler:n}),o.update(e,i)))},o.read=function(e,n,t){var i=u(e);i.emit?c(i,n,t):o.request(e,n,t)},o.serve=function(e,n){var t,i=u(e);n instanceof Function&&(i.fetch=n,n=i.listeners||[],t=i.readers||[],n.length||t.length)&&o.update(e,i)},o.update=function(n,t){(t=t||u(n)).fetch instanceof Function&&!t.fetching&&!t.debounce&&(t.fetching=!0,t.fetch(function(e){t.debounce=!0,t.emit=!0,o.set(n,e),t.fetching=!1,setTimeout(function(){delete t.debounce},3e3)}))},o.as=function(e){var n=u(e);if(n.as)return n.as;var t,i=n.as=new s(e);for(t in o){var r=o[t];r instanceof Function?i[t]=r.bind(i,e):i[t]=r}return i.as=o.as,i},o.has=function(e){return t.hasOwnProperty(e)},o.isSet=function(e){return o.has(e)&&!0===u(e).set},o.isAs=function(e){return e instanceof s},o.onSet=function(e){var n;return!!o.isSet(e)||(n=(e=u(e)).onSet,e.onSet=!0,n)},o.store=function(){return t}},Binh.StateAlias=function(e){this.sid=e},function(){function n(){}Binh.Util={emitEvent:function(e,n){var t;document.createEvent?("function"==typeof Event?t=new Event(n):(t=document.createEvent("Event")).initEvent(n,!1,!0),e.dispatchEvent(t)):((t=document.createEventObject()).eventName=t.eventType=n,e.fireEvent("on"+t.eventType,t))},domced:function(e){var n=e&&e.element instanceof Node,t=document.contains(e&&e.element),i=e&&e.domed;return e&&(e.domed=!0),!(n&&i&&!t)},require:function(e){return e.replace(/^@\//,"/").replace(/^@/,"/").replace(/\.js$/,"")+".js"}},Binh.r=Binh.Util.require,Binh.to={func:function(e){return e instanceof Function?e:n},array:function(e){return null==e?[]:e instanceof Array?e:Array.prototype.slice.call(e)},args:function(e,n){return e instanceof Array?e:Binh.to.array(n)},unique:function(e,n){if(!(e instanceof Array))return e;var t,i={},r=[],o=[];for(t in e){var s=e[t],u=s&&s[n];i.hasOwnProperty(u)||r.push(u),i[u]=s}return r.forEach(function(e){o.push(i[e])}),o},keys:function(e){var n,t=[];for(n in e)t.push(n);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}},Binh.typeOf=function(e){return Object.prototype.toString.call(e).slice(8,-1)},Binh.is={Arguments:function(e){return"Arguments"===Binh.typeOf(e)}}}();